<div id="accounts"></div>

<script type="text/javascript">
  $(function() {
  //window.router = new MyMoney.Routers.AccountsRouter({accounts: <%= @accounts.to_json.html_safe -%>});
  //Backbone.history.start();
  });
</script>


<h1>Accounts <%= link_to content_tag(:span, "New", class: "glyphicon glyphicon-plus"), new_account_path, class: "btn btn-default" %></h1>
<p id="notice"><%= notice %></p>

  <div class="panel panel-default">
  
    <div class="panel-heading">
      <h4>Account Summary</h4>
    </div>
    
	<table class="table">
  	  <thead>
    	<tr>
          <th>Name</th>
          <th>Bank</th>
          <th class="money">Current Balance</th>
          <th></th>
        </tr>
  	  </thead>

  	  <tbody>
    	<% @accounts.each do |account| %>
      	<tr>
          <td><%= link_to account.name, transactions_path(account_id: account.id) %></td>
          <td><%= account.bank %></td>
          <td class="money"><%= number_to_currency(account.current_balance) %></td>
          <td class="links"><%= link_to content_tag(:span, "", class: "glyphicon glyphicon-edit"), edit_account_path(account), id: 'edit' %></td>
        </tr>
        <% end %>
        
        <tr class='totals'><td colspan='2'><strong>Net Worth</strong></td><td class='money'><strong><%= number_to_currency(@net_worth) %></strong></td><td></td></tr>
  	  </tbody>
	</table>
	
  </div> <!-- end panel-->

<br>
